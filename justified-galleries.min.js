!function(){"use strict";function e(e){e.style.display="",e.style.flexWrap="",e.style.alignItems="";const t=e.querySelectorAll("img"),i=e.querySelectorAll("a.gallery-item");t.forEach(e=>{e.style.objectFit="",e.style.display="",e.style.width="",e.style.height="",e.style.marginRight="",e.style.marginBottom="",e.style.boxSizing=""}),i.forEach(e=>{e.style.display="",e.style.lineHeight=""})}function t(e,t,i){const l=e.getBoundingClientRect().width;!function(e){e.style.display="flex",e.style.flexWrap="wrap",e.style.alignItems="flex-start"}(e),t.forEach((e,t)=>{const s=function(e,t,i){const l=t-(e.length-1)*i,s=l/e.reduce((e,t)=>e+t.aspectRatio,0),o=e.map(e=>Math.floor(e.aspectRatio*s)),r=l-o.reduce((e,t)=>e+t,0);return o[o.length-1]+=r,o}(e,l,i.gap),o=e.reduce((e,t)=>e+t.aspectRatio,0),r=(l-(e.length-1)*i.gap)/o,n=Math.round(r);e.forEach((t,l)=>{const o=s[l],r=n,a=l===e.length-1?0:i.gap;var c;!function(e,t,i,l,s){e.style.objectFit="cover",e.style.display="block",e.style.width=t+"px",e.style.height=i+"px",e.style.marginRight=l+"px",e.style.marginBottom=s+"px",e.style.boxSizing="border-box"}(t.img,o,r,a,i.gap),(c=t.link).style.display="block",c.style.lineHeight="0"})})}function i(l,s,o=!1){if("true"===l.dataset.jgProcessed&&!o)return;(o||"true"===l.dataset.jgProcessed)&&e(l);const r=l.getBoundingClientRect().width;if(r<=0)return console.warn("JustifiedGalleries: Container has zero width, skipping layout"),void requestAnimationFrame(()=>{delete l.dataset.jgProcessed,i(l,s,!0)});const n=function(e){const t=[];return e.querySelectorAll("a.gallery-item").forEach((i,l)=>{if(i.parentElement!==e)return void console.warn(`JustifiedGalleries: Gallery item ${l} is not a direct child of container`);const s=i.querySelector("img");if(!s||s.parentElement!==i)return void console.warn(`JustifiedGalleries: Gallery item ${l} missing direct img child`);const o=parseInt(s.getAttribute("width")),r=parseInt(s.getAttribute("height"));!o||!r||o<=0||r<=0?console.warn(`JustifiedGalleries: Image ${l} missing valid width/height attributes`):t.push({img:s,link:i,width:o,height:r,aspectRatio:o/r})}),t}(l);if(0===n.length)return void console.warn("JustifiedGalleries: No valid images found in container");const a=function(e,t,i){const l=[];let s=[],o=0;for(let r=0;r<e.length;r++){const n=e[r],a=n.aspectRatio*i.rowHeight,c=s.length;i.gap,o+a+(c>0?i.gap:0)>t&&s.length>0?(l.push([...s]),s=[n],o=a):(s.push(n),o+=a+(s.length>1?i.gap:0))}return s.length>0&&l.push(s),l}(n,r,s);t(l,a,s),l.dataset.jgProcessed="true"}const l=function(e,t){let i,l=0;return function(...s){const o=Date.now();o-l>t?(e.apply(this,s),l=o):(clearTimeout(i),i=setTimeout(()=>{e.apply(this,s),l=Date.now()},t-(o-l)))}}(()=>{window.JustifiedGalleries&&window.JustifiedGalleries._galleryConfigs.length>0&&window.JustifiedGalleries.refreshAllGalleries()},250);window.JustifiedGalleries={_galleryConfigs:[],defaults:Object.assign({},{selector:".jgs-gallery",rowHeight:300,gap:8,strictRowHeight:!1,cropTolerance:.15}),init:function(e={}){try{const t=Object.assign({},this.defaults,e),s=this._galleryConfigs.findIndex(e=>e.selector===t.selector);s>=0?this._galleryConfigs[s]={selector:t.selector,config:t}:this._galleryConfigs.push({selector:t.selector,config:t});const o=document.querySelectorAll(t.selector);if(0===o.length)return void console.warn(`JustifiedGalleries: No containers found with selector "${t.selector}"`);o.forEach(e=>{i(e,t)}),this._resizeHandlerAttached||(window.addEventListener("resize",l),this._resizeHandlerAttached=!0),console.log(`JustifiedGalleries: Initialized ${o.length} galleries with selector "${t.selector}"`)}catch(e){console.error("JustifiedGalleries initialization failed:",e)}},reset:function(t){if(t&&"true"===t.dataset.jgProcessed){e(t),delete t.dataset.jgProcessed;const l=this._galleryConfigs.find(e=>t.matches(e.selector));l&&i(t,l.config,!0)}},resetAll:function(){this._galleryConfigs.forEach(t=>{document.querySelectorAll(t.selector).forEach(t=>{e(t),delete t.dataset.jgProcessed})}),this._galleryConfigs.forEach(e=>{document.querySelectorAll(e.selector).forEach(t=>{i(t,e.config)})})},refreshAllGalleries:function(){if(0===this._galleryConfigs.length)return void console.warn("JustifiedGalleries: No gallery configs available for refresh");let t=0;this._galleryConfigs.forEach(l=>{document.querySelectorAll(l.selector).forEach(s=>{e(s),delete s.dataset.jgProcessed,i(s,l.config,!0),t++})}),console.log(`JustifiedGalleries: Refreshed ${t} galleries across ${this._galleryConfigs.length} configurations`)}}}();